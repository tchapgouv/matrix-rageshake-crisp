import unittest
import random
import string
import datetime

from sleepy_conversations import get_sleepy_conversations,change_conversation_state,get_conversation_state, send_message, wakeup_sleepy_conversation

conversation_id = "session_691ea0d5-0543-427b-85dd-95bc412ceb27"

class TestFunctions(unittest.TestCase):
    
    
    def test_get_sleepy_conversation(self):
        sleepy_conversations = sleepy_conversations + get_sleepy_conversations(2)
        sleepy_conversations = sleepy_conversations + get_sleepy_conversations(3)
        sleepy_conversations = sleepy_conversations + get_sleepy_conversations(4)
        print(f'sleepy conversations : {len(sleepy_conversations)}')
        

    def test_must_send_message(self):
       simple_message = "coucou"
       send_message(conversation_id, simple_message)

    def test_must_send_multiline_message_with_markdown(self):
       message = """*coucou*
                    
                    ca roule?

                    Moi ca va
                    """
       send_message(conversation_id, message)

    def test_must_change_state(self):
        new_state = "pending"
        change_conversation_state(conversation_id, new_state)
        state = get_conversation_state(conversation_id)
        print(state)
        self.assertEqual(state, new_state)

    def test_wakeup_sleepy_conversation(self):
        wakeup_sleepy_conversation("")



if __name__ == "__main__":
    unittest.main() 